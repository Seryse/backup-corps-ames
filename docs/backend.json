{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "description": "Stores public and private user profile information.",
      "type": "object",
      "properties": {
        "displayName": { "type": "string", "description": "The user's display name or nickname." },
        "email": { "type": "string", "format": "email", "description": "The user's primary email address." },
        "photoURL": { "type": "string", "format": "uri", "description": "URL for the user's profile picture." },
        "certificateName": { "type": "string", "description": "The full name to be printed on certifications." },
        "billingAddress": {
          "type": "object",
          "description": "The user's billing address.",
          "properties": {
            "street": { "type": "string" },
            "city": { "type": "string" },
            "postalCode": { "type": "string" },
            "country": { "type": "string" }
          }
        }
      },
      "required": ["email"]
    },
    "Formation": {
      "title": "Formation",
      "type": "object",
      "description": "Represents a training course or program offered.",
      "properties": {
        "name": {
          "type": "object",
          "description": "Localized name of the formation.",
          "properties": { "en": { "type": "string" }, "fr": { "type": "string" }, "es": { "type": "string" } },
          "required": ["en", "fr", "es"]
        },
        "description": {
          "type": "object",
          "description": "Localized detailed description of the formation.",
          "properties": { "en": { "type": "string" }, "fr": { "type": "string" }, "es": { "type": "string" } },
          "required": ["en", "fr", "es"]
        },
        "pageContent": {
          "type": "object",
          "description": "Localized long-form content for the formation's detail page.",
          "properties": { "en": { "type": "string" }, "fr": { "type": "string" }, "es": { "type": "string" } }
        },
        "videoUrl": { "type": "string", "description": "URL of the formation's presentation video.", "format": "uri" },
        "tokenProductId": { "type": "string", "description": "Identifier for the access token product." },
        "price": { "type": "number", "description": "Price of the formation in the smallest currency unit (e.g., cents)." },
        "currency": { "type": "string", "description": "Currency for the price (e.g., eur, usd)." },
        "imageUrl": { "type": "string", "description": "URL of the formation's image, hosted on Firebase Storage.", "format": "uri" },
        "chapters": {
            "type": "array",
            "description": "The chapters of the formation.",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string", "description": "Unique identifier for the chapter (e.g., a slug or UUID)." },
                "title": { "type": "object", "description": "Localized title of the chapter.", "properties": { "en": { "type": "string" }, "fr": { "type": "string" }, "es": { "type": "string" } }, "required": ["fr"] },
                "description": { "type": "object", "description": "Localized brief description of the chapter.", "properties": { "en": { "type": "string" }, "fr": { "type": "string" }, "es": { "type": "string" } } },
                "contentUrl": { "type": "object", "description": "Localized URL to the chapter content (e.g., PDF).", "properties": { "en": { "type": "string", "format": "uri" }, "fr": { "type": "string", "format": "uri" }, "es": { "type": "string", "format": "uri" } } }
              },
              "required": ["id", "title"]
            }
          }
      },
      "required": ["name", "description", "tokenProductId", "price", "currency", "imageUrl"]
    },
    "UserFormation": {
      "title": "UserFormation",
      "type": "object",
      "description": "Represents a user's enrollment in a specific formation and their access token.",
      "properties": {
        "userId": { "type": "string", "description": "Reference to User. (Relationship: User 1:N UserFormation)" },
        "formationId": { "type": "string", "description": "Reference to Formation. (Relationship: Formation 1:N UserFormation)" },
        "accessToken": { "type": "string", "description": "Token granting access to the dedicated hub/content for the formation." },
        "enrollmentDate": { "type": "string", "description": "Date when the user enrolled in the formation.", "format": "date-time" },
        "completedChapters": { "type": "array", "description": "List of completed chapter IDs for this user's enrollment.", "items": { "type": "string" } },
        "certificationUrl": { "type": "string", "format": "uri", "description": "URL to the user's completion certificate for this formation, if earned." }
      },
      "required": ["userId", "formationId", "accessToken", "enrollmentDate"]
    },
    "NewsArticle": {
      "title": "News Article",
      "type": "object",
      "description": "Represents a single news article or blog post.",
      "properties": {
        "title": { "type": "object", "description": "Localized title of the article.", "properties": { "en": { "type": "string" }, "fr": { "type": "string" }, "es": { "type": "string" } }, "required": ["en", "fr", "es"] },
        "content": { "type": "object", "description": "Localized content of the article.", "properties": { "en": { "type": "string" }, "fr": { "type": "string" }, "es": { "type": "string" } }, "required": ["en", "fr", "es"] },
        "imageUrl": { "type": "string", "description": "URL of the article's image, hosted on Firebase Storage.", "format": "uri" },
        "createdAt": { "type": "string", "description": "Date when the article was created.", "format": "date-time" }
      },
      "required": ["title", "content", "imageUrl", "createdAt"]
    },
    "Subtitle": {
      "title": "Subtitle",
      "type": "object",
      "description": "Represents a single subtitle entry with its translation for a live session.",
      "properties": {
        "original": { "type": "string", "description": "The original text captured from speech." },
        "translated": { "type": "string", "description": "The translated text in the target language." },
        "timestamp": { "type": "number", "description": "The timestamp when the subtitle was generated." }
      },
      "required": ["original", "translated", "timestamp"]
    },
    "SessionType": {
      "title": "Session Type",
      "type": "object",
      "description": "Represents a type of session that can be booked.",
      "properties": {
        "name": { "type": "object", "description": "Localized name of the session type.", "properties": { "en": { "type": "string" }, "fr": { "type": "string" }, "es": { "type": "string" } }, "required": ["en", "fr", "es"] },
        "description": { "type": "object", "description": "Localized description of the session type.", "properties": { "en": { "type": "string" }, "fr": { "type": "string" }, "es": { "type": "string" } }, "required": ["en", "fr", "es"] },
        "pageContent": { "type": "object", "description": "Localized long-form content for the session type's detail page.", "properties": { "en": { "type": "string" }, "fr": { "type": "string" }, "es": { "type": "string" } } },
        "videoUrl": { "type": "string", "description": "URL of the session type's presentation video.", "format": "uri" },
        "sessionModel": { "type": "string", "enum": ["private", "small_group", "large_group"], "description": "Defines the capacity of the session." },
        "maxParticipants": { "type": "number", "description": "Maximum number of participants. 1 for private, up to 5 for small_group, etc." },
        "price": { "type": "number", "description": "Price in smallest currency unit." },
        "currency": { "type": "string", "description": "Currency code (e.g., eur)." },
        "tokenProductId": { "type": "string", "description": "Identifier for the access token product for this session type." },
        "imageUrl": { "type": "string", "description": "URL of the session type's image, hosted on Firebase Storage.", "format": "uri" },
        "category": { "type": "string", "description": "The category of the session type.", "enum": ["irisphere-harmonia", "guidances", "energetic-treatments", "dialogue-space", "combined-treatments"] }
      },
      "required": ["name", "description", "sessionModel", "maxParticipants", "price", "currency", "tokenProductId", "category"]
    },
    "TimeSlot": {
      "title": "Time Slot",
      "type": "object",
      "description": "Represents an available time slot for a session.",
      "properties": {
        "sessionTypeId": { "type": "string", "description": "Reference to SessionType." },
        "startTime": { "type": "string", "format": "date-time", "description": "The start time of the session." },
        "endTime": { "type": "string", "format": "date-time", "description": "The end time of the session." },
        "bookedParticipantsCount": { "type": "number", "description": "Number of participants already booked for this slot." }
      },
      "required": ["sessionTypeId", "startTime", "endTime", "bookedParticipantsCount"]
    },
    "LiveSession": {
      "title": "Live Session State & Booking",
      "type": "object",
      "description": "Stores the real-time state of a live video session and its associated booking information.",
      "properties": {
        "userId": { "type": "string", "description": "The UID of the client/user attending the session." },
        "hostId": { "type": "string", "description": "The UID of the host (praticien)." },
        "timeSlotId": { "type": "string" },
        "sessionTypeId": { "type": "string" },
        "bookingTime": { "type": "string", "format": "date-time" },
        "bookingStatus": { "type": "string", "enum": ["confirmed", "pending", "cancelled"] },
        "visioToken": { "type": "string", "description": "The unique token granting access to the live video session." },
        "reportStatus": { "type": "string", "enum": ["pending", "available"], "description": "Status of the Grimoire PDF report." },
        "pdfUrl": { "type": "string", "format": "uri", "description": "URL of the generated Grimoire PDF report." },
        "pdfThumbnail": { "type": "string", "format": "uri", "description": "URL of the thumbnail for the Grimoire PDF." },
        "sessionStatus": { "type": "string", "description": "The current status of the session.", "enum": [ "WAITING", "INTRO", "HEALING", "OUTRO" ] },
        "startTime": { "type": "string", "format": "date-time", "description": "The timestamp when the INTRO or HEALING status began." },
        "lang": { "type": "string", "description": "The language of the session, used for loading localized assets." },
        "activePlaylistUrl": { "type": "string", "description": "URL of the background music playlist." },
        "subtitle": { "$ref": "#/entities/Subtitle" }
      },
      "required": [ "userId", "hostId", "timeSlotId", "sessionTypeId", "bookingTime", "bookingStatus", "visioToken", "reportStatus", "sessionStatus" ]
    },
    "Testimonial": {
      "title": "Testimonial",
      "type": "object",
      "description": "User feedback provided after a session.",
      "properties": {
        "userId": { "type": "string" },
        "bookingId": { "type": "string", "description": "The ID of the session document this testimonial refers to." },
        "submittedAt": { "type": "string", "format": "date-time" },
        "feedbackText": { "type": "string" },
        "mediaUrl": { "type": "string", "format": "uri" },
        "mediaType": { "type": "string", "enum": ["audio", "video"] }
      },
      "required": ["userId", "bookingId", "submittedAt"]
    },
    "Coupon": {
      "title": "Coupon",
      "type": "object",
      "description": "A promotional coupon code.",
      "properties": {
        "code": { "type": "string" },
        "userId": { "type": "string" },
        "discountPercentage": { "type": "number" },
        "createdAt": { "type": "string", "format": "date-time" },
        "isUsed": { "type": "boolean" }
      },
      "required": ["code", "userId", "discountPercentage", "createdAt", "isUsed"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "google.com"
    ]
  },
  "firestore": {
    "/formations/{formationId}": {
      "schema": { "$ref": "#/entities/Formation" },
      "description": "Stores information about each formation."
    },
    "/users/{userId}/formations/{userFormationId}": {
      "schema": { "$ref": "#/entities/UserFormation" },
      "description": "Represents a user's enrollment in a specific formation."
    },
    "/news/{newsId}": {
      "schema": { "$ref": "#/entities/NewsArticle" },
      "description": "Stores all news articles."
    },
    "/sessionTypes/{sessionTypeId}": {
      "schema": { "$ref": "#/entities/SessionType" },
      "description": "Stores all available types of sessions."
    },
    "/timeSlots/{timeSlotId}": {
      "schema": { "$ref": "#/entities/TimeSlot" },
      "description": "Stores all available time slots for all sessions."
    },
    "/sessions/{sessionId}": {
      "schema": { "$ref": "#/entities/LiveSession" },
      "description": "Stores a user's session booking and its live state. The document ID is the unique identifier for the session/booking."
    },
    "/testimonials/{testimonialId}": {
      "schema": { "$ref": "#/entities/Testimonial" },
      "description": "Stores user testimonials submitted after sessions."
    },
    "/coupons/{couponId}": {
      "schema": { "$ref": "#/entities/Coupon" },
      "description": "Stores generated coupon codes for users."
    },
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/UserProfile" },
      "description": "Stores user profile information."
    }
  }
}
