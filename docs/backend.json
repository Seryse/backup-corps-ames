{
  "entities": {
    "Formation": {
      "title": "Formation",
      "type": "object",
      "description": "Represents a training course or program offered.",
      "properties": {
        "name": {
          "type": "object",
          "description": "Localized name of the formation.",
          "properties": {
            "en": { "type": "string" },
            "fr": { "type": "string" },
            "es": { "type": "string" }
          },
          "required": ["en", "fr", "es"]
        },
        "description": {
          "type": "object",
          "description": "Localized detailed description of the formation.",
          "properties": {
            "en": { "type": "string" },
            "fr": { "type": "string" },
            "es": { "type": "string" }
          },
          "required": ["en", "fr", "es"]
        },
        "tokenProductId": {
          "type": "string",
          "description": "Identifier for the access token product."
        },
        "price": {
          "type": "number",
          "description": "Price of the formation in the smallest currency unit (e.g., cents)."
        },
        "currency": {
          "type": "string",
          "description": "Currency for the price (e.g., eur, usd)."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the formation's image, hosted on Firebase Storage.",
          "format": "uri"
        }
      },
      "required": [
        "name",
        "description",
        "tokenProductId",
        "price",
        "currency",
        "imageUrl"
      ]
    },
    "UserFormation": {
      "title": "UserFormation",
      "type": "object",
      "description": "Represents a user's enrollment in a specific formation and their access token.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N UserFormation)"
        },
        "formationId": {
          "type": "string",
          "description": "Reference to Formation. (Relationship: Formation 1:N UserFormation)"
        },
        "accessToken": {
          "type": "string",
          "description": "Token granting access to the dedicated hub/content for the formation."
        },
        "enrollmentDate": {
          "type": "string",
          "description": "Date when the user enrolled in the formation.",
          "format": "date-time"
        }
      },
      "required": [
        "userId",
        "formationId",
        "accessToken",
        "enrollmentDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "google.com"
    ]
  },
  "firestore": {
    "/formations/{formationId}": {
      "schema": {
        "$ref": "#/entities/Formation"
      },
      "description": "Stores information about each formation. 'formationId' is the unique identifier for the formation."
    },
    "/users/{userId}/formations/{userFormationId}": {
      "schema": {
        "$ref": "#/entities/UserFormation"
      },
      "description": "Represents a user's enrollment in a specific formation and their access token. This subcollection uses path-based ownership for simplified security rules."
    }
  }
}
